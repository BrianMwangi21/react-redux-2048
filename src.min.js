webpackJsonp([1],{0:function(e,t,n){(function(e){try{(function(){"use strict";var t=n(5)["default"],r=n(230),a=t(r),u=n(238),i=t(u);n(214),a["default"].render(e.createElement(i["default"],null),document.getElementById("application"))}).call(this)}finally{}}).call(t,n(2))},69:function(e,t,n){try{(function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=0;t.UP=e;var n=1;t.LEFT=n;var r=2;t.DOWN=r;var a=3;t.RIGHT=a;var u=[];t.VECTORS=u,u[e]={x:1,y:0},u[n]={x:0,y:1},u[r]={x:-1,y:0},u[a]={x:0,y:-1};var i={38:e,37:n,40:r,39:a};t.DIRECTIONS=i;var o=2;t.INITIAL=o;var l=4;t.SIZE=l;var s=2;t.STARTING_TILES=s;var c=0;t.START_SCORE=c;var f=2048;t.WIN_SCORE=f}).call(this)}finally{}},117:function(e,t,n){try{(function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(242),a=["NEW_TILE","MOVE_TILES","ACTUALIZE","MERGE_TILES","INIT_GAME","GAME_OVER","SAVE_GAME","RESET_RESULT"];t["default"]=(0,r.generateActions)(a),e.exports=t["default"]}).call(this)}finally{}},118:function(e,t,n){try{(function(){"use strict";var e=n(95)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(232);t.Board=e(r);var a=n(233);t.Grid=e(a);var u=n(236);t.Tile=e(u);var i=n(234);t.Overlay=e(i);var o=n(235);t.Result=e(o)}).call(this)}finally{}},119:function(e,t,n){try{(function(){"use strict";function e(e,t){return Math.floor(Math.random()*(t-e+1))+e}function n(t){var n=1,r=Math.round(100/t),a=e(n,r);return function(){return e(n,r)===a?!0:!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.randomNumber=e;var r=n(1);t.isLucky=r}).call(this)}finally{}},214:function(e,t){},228:function(e,t,n){e.exports=n.p+"assets/restart.svg"},231:function(e,t,n){try{(function(){"use strict";function e(){return function(e){e({type:f["default"].NEW_TILE})}}function r(e){return function(t){t({type:f["default"].MOVE_TILES,direction:e})}}function a(){return function(e){e({type:f["default"].ACTUALIZE})}}function u(){return function(e){e({type:f["default"].MERGE_TILES})}}function i(){return function(e){e({type:f["default"].INIT_GAME})}}function o(){return function(e){e({type:f["default"].SAVE_GAME})}}function l(){return function(e){e({type:f["default"].RESET_RESULT})}}var s=n(5)["default"];Object.defineProperty(t,"__esModule",{value:!0}),t.newTile=e,t.moveTiles=r,t.actualize=a,t.mergeTiles=u,t.initGame=i,t.saveGame=o,t.resetResult=l;var c=n(117),f=s(c)}).call(this)}finally{}},232:function(e,t,n){(function(r){try{(function(){"use strict";function a(e){return{x:e[0].clientX,y:e[0].clientY}}var u=n(33)["default"],i=n(8)["default"],o=n(29)["default"],l=n(7)["default"],s=n(14)["default"],c=n(166)["default"],f=n(94)["default"];Object.defineProperty(t,"__esModule",{value:!0});var d=n(2),v=n(71),p=n(68),y=n(118),h=n(69),m={x:0,y:0},E=function(e){function t(){var e=this;l(this,n),u(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments),this.state={moved:!1},this.queue=[],this._handleKeyUp=function(t){var n=h.DIRECTIONS[t.keyCode];"undefined"!=typeof n&&e._prepare(n)},this._disableScroll=function(e){e.preventDefault()},this._handleTouchStart=function(t){e.touch=a(t.touches)},this._handleTouchEnd=function(t){if(e.touch.x&&e.touch.y){var n=a(t.changedTouches),r=n.x,u=n.y,i=e.touch.x-r,o=e.touch.y-u;Math.abs(i)>Math.abs(o)?i>0?e._prepare(h.LEFT):e._prepare(h.RIGHT):o>0?e._prepare(h.UP):e._prepare(h.DOWN),e.touch=m,e.refs.board.removeEventListener("touchmove")}},this._handleTransitionEnd=function(t){-1!==["top","left"].indexOf(t.propertyName)&&(e.called||(e.context.actions.mergeTiles(),e.context.actions.newTile(),e._resolve()))},this._prepare=function(t){e.queue.push(t),e._execute(!0)},this._resolve=function(){e.queue.shift(),e.resolve(),e.called=!0},this._execute=function t(){return c.async(function(e){for(var n=this;;)switch(e.prev=e.next){case 0:if(!(this.queue.length<=1)){e.next=6;break}return e.next=3,c.awrap(this._moveTiles(this.queue[0]));case 3:this.queue.length&&this._execute(),e.next=7;break;case 6:this._execute=function(e){return c.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=2;break}return n.abrupt("return");case 2:if(!this.queue.length){n.next=8;break}return n.next=5,c.awrap(this._moveTiles(this.queue[0]));case 5:this._execute(),n.next=9;break;case 8:this._execute=t;case 9:case"end":return n.stop()}},null,n)};case 7:case"end":return e.stop()}},null,this)}}i(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this.refs,t=e.tiles,n=e.board;document.addEventListener("keyup",this._handleKeyUp,!1),t.addEventListener("transitionend",this._handleTransitionEnd,!1),n.addEventListener("touchstart",this._handleTouchStart,!1),n.addEventListener("touchmove",this._disableScroll,!1),n.addEventListener("touchend",this._handleTouchEnd,!1),this.props.fromSaved||this.context.actions.initGame()}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.isActual;n||e.isActual===n?this.state.moved&&this._resolve():setTimeout(function(){t.context.actions.actualize(),t.setState({moved:!1}),t.called=!1},50)}},{key:"render",value:function(){var e=this.props,t=e.game,n=e.win,a=e.fromSaved,u=e.handleNewGame,i=t.get("grid").flatten(2),o=i.map(function(e){return r.createElement(y.Tile,s({fromSaved:a,key:e.get("id")},e.toJS()))}),l=null!==n;return l&&document.removeEventListener("keyup"),r.createElement("wrapper",{ref:"board"},l&&r.createElement(y.Overlay,{win:n,onNewGame:u}),r.createElement("container",{ref:"tiles",id:"tiles"},o),r.createElement(y.Grid,{size:h.SIZE}))}},{key:"_moveTiles",value:function(e){var t=this;return new f(function(n){t.resolve=n,t.context.actions.moveTiles(e),t.setState({moved:!0})})}}],[{key:"propTypes",value:{game:d.PropTypes.instanceOf(p.Map).isRequired,isActual:d.PropTypes.bool.isRequired,win:d.PropTypes.bool,fromSaved:d.PropTypes.bool.isRequired,handleNewGame:d.PropTypes.func.isRequired},enumerable:!0},{key:"contextTypes",value:{actions:d.PropTypes.object.isRequired},enumerable:!0}]);var n=t;return t=(0,v.connect)(function(e){var t=e.game;return{game:t,isActual:t.get("isActual"),win:t.get("win"),fromSaved:t.get("fromSaved")}})(t)||t}(d.Component);t["default"]=E,e.exports=t["default"]}).call(this)}finally{}}).call(t,n(2))},233:function(e,t,n){(function(r){try{(function(){"use strict";var a=n(5)["default"];Object.defineProperty(t,"__esModule",{value:!0});var u=n(115),i=a(u);t["default"]=function(e){var t=e.size,n=void 0===t?4:t,a=i["default"].range(Math.pow(n,2)),u=i["default"].map(a,function(e){return r.createElement("column",{key:e})});return r.createElement("container",{id:"grid"},u)},e.exports=t["default"]}).call(this)}finally{}}).call(t,n(2))},234:function(e,t,n){(function(r){try{(function(){"use strict";var a=n(5)["default"];Object.defineProperty(t,"__esModule",{value:!0});var u=n(228),i=a(u);t["default"]=function(e){var t=e.win,n=void 0===t?!1:t,a=e.onNewGame,u=n?"You won. Congratulations!":"Game over.",o=n?"win":"lose";return r.createElement("div",{id:"overlay",className:o},r.createElement("h2",null,u),r.createElement("img",{src:i["default"],className:"restart",onClick:a}))},e.exports=t["default"]}).call(this)}finally{}}).call(t,n(2))},235:function(e,t,n){(function(r){try{(function(){"use strict";var a=n(33)["default"],u=n(8)["default"],i=n(29)["default"],o=n(7)["default"],l=n(5)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),c=n(116),f=l(c),d=function(e){function t(){var e=this;o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this._onTransitionEnd=function(){e.context.actions.resetResult()}}return u(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this.refs.result;e.addEventListener("transitionend",this._onTransitionEnd,!1)}},{key:"render",value:function(){var e=this.props.result;return r.createElement(f["default"],{transitionName:"result",transitionAppear:!0,transitionLeave:!1,transitionEnterTimeout:0,transitionLeaveTimeout:0,transitionAppearTimeout:0},r.createElement("div",{ref:"result",className:"result"},"+",e))}}],[{key:"propTypes",value:{result:s.PropTypes.number.isRequired},enumerable:!0},{key:"contextTypes",value:{actions:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t["default"]=d,e.exports=t["default"]}).call(this)}finally{}}).call(t,n(2))},236:function(e,t,n){(function(r){try{(function(){"use strict";var a=n(33)["default"],u=n(8)["default"],i=n(29)["default"],o=n(7)["default"],l=n(5)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),c=n(168),f=l(c),d=n(116),v=l(d),p=function(e){function t(){o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return u(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.x,n=e.y,a=e.value,u=e.id,i=e.fromSaved,o=(0,f["default"])("tile","tile-"+a,"cell-"+t+"-"+n),l=void 0;return l=i?!1:2!==a,r.createElement(v["default"],{transitionName:l?"merged":"tile",transitionAppear:!0,transitionEnterTimeout:0,transitionLeaveTimeout:0,transitionAppearTimeout:0},r.createElement("div",{className:o,key:u,ref:"tile"},a))}}],[{key:"propTypes",value:{x:s.PropTypes.number.isRequired,y:s.PropTypes.number.isRequired,value:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]).isRequired,id:s.PropTypes.number.isRequired,fromSaved:s.PropTypes.bool.isRequired},enumerable:!0},{key:"contextTypes",value:{actions:s.PropTypes.object.isRequired},enumerable:!0}]),t}(s.Component);t["default"]=p,e.exports=t["default"]}).call(this)}finally{}}).call(t,n(2))},237:function(e,t,n){(function(r){try{(function(){"use strict";var a=n(33)["default"],u=n(8)["default"],i=n(29)["default"],o=n(7)["default"],l=n(165)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),c=n(71),f=n(32),d=n(118),v=n(231),p=l(v),y=function(e){function t(e){var t=this;o(this,n),a(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e),this._handleNewGame=function(){t.actions.initGame()},this._handleSaveGame=function(){t.actions.saveGame()},this.actions=(0,f.bindActionCreators)(p,this.props.dispatch)}u(t,e),i(t,[{key:"getChildContext",value:function(){return{actions:this.actions}}},{key:"render",value:function(){var e=this.props,t=e.score,n=e.result,a=void 0;return n&&(a=r.createElement(d.Result,{result:n})),r.createElement("main",null,r.createElement("div",{id:"score"},a,r.createElement("h3",null,"Score: ",t)),r.createElement("button",{onClick:this._handleNewGame},"New Game"),r.createElement("button",{onClick:this._handleSaveGame},"Save Game"),r.createElement(d.Board,{key:"1",handleNewGame:this._handleNewGame}))}}],[{key:"propTypes",value:{score:s.PropTypes.number.isRequired,result:s.PropTypes.number},enumerable:!0},{key:"childContextTypes",value:{actions:s.PropTypes.object},enumerable:!0}]);var n=t;return t=(0,c.connect)(function(e){return{score:e.game.get("score"),result:e.game.get("result")}})(t)||t}(s.Component);t["default"]=y,e.exports=t["default"]}).call(this)}finally{}}).call(t,n(2))},238:function(e,t,n){(function(r){try{(function(){"use strict";var a=n(33)["default"],u=n(8)["default"],i=n(29)["default"],o=n(7)["default"],l=n(5)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),c=n(32),f=n(71),d=n(375),v=l(d),p=n(243),y=n(241),h=l(y),m=n(237),E=l(m),_=(0,c.compose)((0,c.applyMiddleware)(v["default"]))(p.createStore)(h["default"]),g=function(e){function t(){o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return u(t,e),i(t,[{key:"render",value:function(){return r.createElement("div",null,r.createElement(f.Provider,{store:_},r.createElement(E["default"],null)),(0,p.renderDevTools)(_))}}]),t}(s.Component);t["default"]=g,e.exports=t["default"]}).call(this)}finally{}}).call(t,n(2))},239:function(e,t,n){try{(function(){"use strict";function e(e,t){var n=(0,i.List)();return _.times(e,function(e){n=n.set(e,(0,i.List)()),_.times(t,function(t){n=n.setIn([e,t],(0,i.List)())})}),n}function r(e,t){var n=(0,i.List)();return _.times(e,function(e){_.times(t,function(t){n=n.push((0,i.Map)({x:e,y:t}))})}),n}function a(e,t){e.forEach(function(e,n){e.forEach(function(e,r){t({cell:e,x:n,y:r})})})}function u(e){var t=e.size-1;return(0,o.randomNumber)(0,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.generateGrid=e,t.generateCells=r,t.forEachCell=a,t.randomCell=u;var i=n(68),o=n(119)}).call(this)}finally{}},240:function(e,t,n){try{(function(){"use strict";function r(){var e=E["default"].get("game");if(e){var t=g["default"].flatten(e.grid,!0),n=g["default"].pluck(t,"id");return n.length&&(R=g["default"].max(n)+1),e.fromSaved=!0,(0,h.fromJS)(e)}}function a(e,t,n){return e.updateIn(["grid",t.get("x"),t.get("y")],function(e){return e.push(t.merge({id:R++,value:n||O.INITIAL}))})}function u(e){if(!e.get("cells").size)return e;var t=(0,I.randomCell)(e.get("cells")),n=e.getIn(["cells",t]),r=e.get("grid").flatten(2).find(function(e){return"x"===e.get("value")});return e=R>1&&(0,b.isLucky)()&&!r?a(e,n,"x"):a(e,n),e.removeIn(["cells",t])}function i(e,t){var n=e.getIn([0,"value"]),r=t.get("value");if(e.size>1)return!1;if(e.size){if("x"===n||"x"===r)return!0;if(n!==r)return!1}return!0}function o(e,t,n){var r=void 0,a=(0,S.getCurrent)(n),u=a.axis,o=a.value,l=t.get(u),s=0>o?O.SIZE-1:0;return(0,h.Range)(s,l).forEach(function(n){var a="x"===u?["grid",n,t.get("y")]:["grid",t.get("x"),n],o=e.getIn(a);return i(o,t)?void("x"===t.get("value")?(1===o.size||!o.size&&!r)&&(r=a):r=r||a):void(r=null)}),r}function l(e,t,n){var r=o(e,t,n);return r&&(e=e.set("isActual",!1),e=e.updateIn(r,function(e){return e.push(t)}),e=e.updateIn(["grid",t.get("x"),t.get("y")],function(e){return e.pop()})),e}function s(e,t){var n=(0,S.getCurrent)(t),r=n.axis,a=n.value;return e=e.sortBy(function(e){return e.get(r)}),0>a&&(e=e.reverse()),e}function c(e,t,n){return t.forEach(function(t){return e=l(e,t,n)}),e}function f(e,t){var n=e,r=g["default"].values(O.DIRECTIONS),a=e.get("grid").flatten(2),u=function(u){var i=!0;e:for(;i;){var o=u;if(i=!1,o!==t&&(n=e),r=g["default"].without(r,o),a=s(a,o),e=c(e,a,o),n===e){if(r.length){u=r[0],i=!0;continue e}return e.set("win",!1)}return o!==t?n:e}};return u(t)}function d(e){var t=e.get("grid");return(0,I.forEachCell)(t,function(e){var n=e.cell,r=e.x,a=e.y;n.size&&n.forEach(function(e,n){(e.get("x")!==r||e.get("y")!==a)&&(t=t.updateIn([r,a,n],function(e){return e.merge({x:r,y:a})}))})}),e.merge({fromSaved:!1,isActual:!0,grid:t})}function v(e,t){return"x"===e.get("value")?2*t.get("value"):"x"===t.get("value")?2*e.get("value"):e.get("value")+t.get("value")}function p(e){var t=(0,h.List)(),n=e.get("grid"),r=0;return(0,I.forEachCell)(n,function(a){var u=a.cell,i=a.x,o=a.y;u.size||(t=t.push((0,h.Map)({x:i,y:o}))),u.size>1&&!function(){var t=u.reduce(function(e,t){return v(e,t)});r+=t,n=n.updateIn([i,o],function(){return h.List.of(u.first().merge({value:t,id:R++}))}),e=e.merge({win:t===O.WIN_SCORE||null,score:e.get("score")+t})}()}),e.merge({cells:t,result:r,grid:n})}var y=n(5)["default"];Object.defineProperty(t,"__esModule",{value:!0});var h=n(68),m=n(381),E=y(m),_=n(115),g=y(_),T=n(117),x=y(T),b=n(119),S=n(244),I=n(239),O=n(69),R=0,P=(0,h.Map)({win:null,score:O.START_SCORE,cells:(0,I.generateCells)(O.SIZE,O.SIZE),grid:(0,I.generateGrid)(O.SIZE,O.SIZE),isActual:!0,fromSaved:!1}),M=r()||P;t["default"]=function(e,t){switch(void 0===e&&(e=M),t.type){case x["default"].NEW_TILE:return u(e);case x["default"].MOVE_TILES:return f(e,t.direction);case x["default"].ACTUALIZE:return d(e);case x["default"].MERGE_TILES:return p(e);case x["default"].INIT_GAME:return(0,E["default"])(!1),e=P,g["default"].times(O.STARTING_TILES,function(){return e=u(e)}),e;case x["default"].GAME_OVER:return e=e.set("win",!1);case x["default"].SAVE_GAME:return(0,E["default"])("game",e.toJS()),e;case x["default"].RESET_RESULT:return e=e.set("result",O.START_SCORE);default:return e}},e.exports=t["default"]}).call(this)}finally{}},241:function(e,t,n){try{(function(){"use strict";var r=n(5)["default"];Object.defineProperty(t,"__esModule",{value:!0});var a=n(32),u=n(240),i=r(u);t["default"]=(0,a.combineReducers)({game:i["default"]}),e.exports=t["default"]}).call(this)}finally{}},242:function(e,t,n){try{(function(){"use strict";function e(e){var t={};for(var n in e)({}).hasOwnProperty.call(e,n)&&(t[e[n]]=e[n]);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.generateActions=e}).call(this)}finally{}},243:function(e,t,n){try{(function(){"use strict";function e(e){}Object.defineProperty(t,"__esModule",{value:!0}),t.renderDevTools=e;var r=n(32),a=(n(321),n(328),r.createStore);t.createStore=a}).call(this)}finally{}},244:function(e,t,n){try{(function(){"use strict";function e(e){return a.VECTORS[e]}function r(t){var n=void 0,r=e(t);for(var a in r)({}).hasOwnProperty.call(r,a)&&0!==r[a]&&(n=a);return{axis:n,value:r[n]}}Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrent=r;var a=n(69)}).call(this)}finally{}}});